# MUSUBI ソフトウェア要件仕様書 (SRS)

**Ultimate Specification Driven Development Tool 機能拡張**

| 項目 | 内容 |
|------|------|
| 文書番号 | MUSUBI-SRS-2025-001 |
| バージョン | 1.0 |
| 作成日 | 2025年12月7日 |
| 対象バージョン | MUSUBI v2.1.1 → v3.0.0 |
| 要件記述形式 | EARS (Easy Approach to Requirements Syntax) |
| ステータス | ドラフト |

---

## 1. エグゼクティブサマリー

本SRSは、MUSUBIの次期メジャーバージョン（v3.0.0）に向けた機能拡張要件を定義します。AIコーディングツールの競合調査（OpenHands、Kiro、Spec Kit、Cline）に基づき、MUSUBIの競争力強化のために14の要件を優先度別に整理しました。

### 1.1 スコープ

- コミュニティ成長施策（認知度向上、マーケティング）
- 機能差別化（ブラウザ自動化、Web GUI、VS Code拡張）
- エコシステム拡大（多言語対応、CI/CD統合）
- 長期的改善（ローカルLLM、コスト追跡）

### 1.2 優先度定義

| 優先度 | 目標 | 説明 |
|--------|------|------|
| P0 | v2.2.0 (2026年Q1) | クリティカル：コミュニティ成長施策 |
| P1 | v2.5.0 (2026年Q2) | 高：機能差別化 |
| P2 | v3.0.0 (2026年Q3) | 中：エコシステム拡大 |
| P3 | v3.5.0 (2026年Q4) | 低：長期的改善 |

---

## 2. P0要件（クリティカル：コミュニティ成長）

MUSUBIは技術的に成熟していますが、競合と比較してGitHubスター数が少ない状況です（現在2スター、Cline: 52K、OpenHands: 65K）。認知度向上がv3.0.0に向けた最重要課題です。

### REQ-P0-001: GitHubリポジトリ最適化

**ID**: REQ-P0-001
**優先度**: P0（クリティカル）
**パターン**: Ubiquitous

**要件**:
システムは、以下の最適化された発見可能性を持つ包括的なGitHubリポジトリを提供しなければならない：

1. 適切なトピックタグ（ai-coding、sdd、specification-driven-development、claude-code等）
2. SEO最適化されたリポジトリ説明（英語・日本語）
3. ビジュアルREADMEバッジ（CI/CD、npm、License、Downloads）
4. デモGIF/スクリーンショット付きREADME

**受入基準**:
- [ ] GitHub検索で「sdd tool」「ai coding agent」でトップ10に表示
- [ ] READMEにアニメーションデモGIFを含む
- [ ] 指定の4つのバッジが表示されている
- [ ] 英語・日本語両方の説明が存在

**トレーサビリティ**: TST-P0-001

---

### REQ-P0-002: Awesome List掲載

**ID**: REQ-P0-002
**優先度**: P0（クリティカル）
**パターン**: Event-Driven

**要件**:
リポジトリが品質基準を満たした場合、システムは以下のキュレーションリストへの申請を行わなければならない：

- awesome-ai-tools
- awesome-developer-tools
- awesome-vscode
- awesome-claude

**受入基準**:
- [ ] 4つ全てのリストへの申請PRが作成されている
- [ ] 最低2つのAwesome Listで承認される
- [ ] 承認されたリストからリポジトリがリンクされている

**トレーサビリティ**: TST-P0-002

---

### REQ-P0-003: コンテンツマーケティング

**ID**: REQ-P0-003
**優先度**: P0（クリティカル）
**パターン**: Ubiquitous

**要件**:
システムは、以下のマーケティング資料を提供しなければならない：

1. 英語チュートリアル記事（Dev.to、Hashnode、Medium）
2. 日本語チュートリアル記事（Zenn、Qiita）
3. YouTubeデモ動画（5-10分、英語字幕付き）
4. X/Twitter告知スレッド

**受入基準**:
- [ ] 各プラットフォームに最低1記事を公開（Dev.to、Hashnode、Medium、Zenn、Qiita）
- [ ] YouTube動画を公開し1,000視聴以上
- [ ] 合計10,000ビュー以上
- [ ] GitHubスター100+を達成

**トレーサビリティ**: TST-P0-003

---

## 3. P1要件（高：機能差別化）

### REQ-P1-001: ブラウザ自動化機能

**ID**: REQ-P1-001
**優先度**: P1（高）
**パターン**: Event-Driven

**要件**:
ユーザーがE2EテストまたはWebスクレイピングを要求した場合、システムはPlaywright/Puppeteer統合によるブラウザ自動化機能を提供しなければならない。

**機能要件**:
- ヘッドレスブラウザ操作（Chrome、Firefox、Safari）
- スクリーンショット取得と比較
- DOM要素選択と操作
- E2Eテストシナリオ生成

**受入基準**:
- [ ] Claude Codeスキルに`browser-agent`スキルが追加されている
- [ ] 自然言語コマンドでブラウザ操作が可能
- [ ] スクリーンショット比較の精度95%以上
- [ ] Playwright形式でE2Eテストコードが生成される

**トレーサビリティ**: TST-P1-001

---

### REQ-P1-002: Web GUIダッシュボード

**ID**: REQ-P1-002
**優先度**: P1（高）
**パターン**: Optional Feature

**要件**:
ユーザーがCLIよりGUIを好む場合、システムはローカルWebベースのインターフェースを提供しなければならない。

**機能要件**:
- ローカルサーバー起動（`musubi-gui`コマンド）
- プロジェクトダッシュボード（ステアリング状態、要件一覧、タスク進捗）
- ビジュアルワークフローエディタ
- トレーサビリティマトリックス可視化

**受入基準**:
- [ ] `musubi-gui`コマンドでローカルサーバーが起動する
- [ ] http://localhost:3000 でダッシュボードにアクセス可能
- [ ] 全てのステアリングファイルがUIに表示される
- [ ] トレーサビリティマトリックスがインタラクティブグラフで表示される

**トレーサビリティ**: TST-P1-002

---

### REQ-P1-003: VS Code Marketplace公式拡張

**ID**: REQ-P1-003
**優先度**: P1（高）
**パターン**: Ubiquitous

**要件**:
システムは、Visual Studio Marketplaceに公開された公式VS Code拡張機能を提供しなければならない。

**機能要件**:
- サイドバーパネル（ステアリング状態、要件、タスク表示）
- コマンドパレット統合（/sdd-*コマンド）
- インラインアノテーション（要件ID、テストカバレッジ）
- ステータスバー（憲法準拠率、トレーサビリティ率）

**受入基準**:
- [ ] VS Code Marketplaceに「MUSUBI SDD」として公開されている
- [ ] インストール数1,000+
- [ ] 平均評価4.0スター以上
- [ ] 全てのサイドバー機能が動作する

**トレーサビリティ**: TST-P1-003

---

### REQ-P1-004: Spec Kit互換性

**ID**: REQ-P1-004
**優先度**: P1（高）
**パターン**: Event-Driven

**要件**:
プロジェクトがGitHub Spec Kit形式を使用している場合、システムはSpec Kit互換形式で仕様のインポートとエクスポートを行わなければならない。

**機能要件**:
- Spec Kit形式のインポート（.speckit/）
- Spec Kit形式へのエクスポート
- 双方向変換（EARS ↔ Spec Kit）

**受入基準**:
- [ ] `musubi-convert --to-speckit`で有効なSpec Kit形式がエクスポートされる
- [ ] `musubi-convert --from-speckit`でSpec Kitプロジェクトがインポートされる
- [ ] ラウンドトリップ変換で全ての要件データが保持される
- [ ] フォーマット検証がSpec Kitスキーマに合格する

**トレーサビリティ**: TST-P1-004

---

## 4. P2要件（中：エコシステム拡大）

### REQ-P2-001: 多言語サポート拡充

**ID**: REQ-P2-001
**優先度**: P2（中）
**パターン**: Optional Feature

**要件**:
ユーザーが対象言語を指定した場合、システムは指定された言語でドキュメントを生成しなければならない。

**対応言語**:
- 中国語（簡体字・繁体字）
- 韓国語
- ドイツ語
- フランス語

**受入基準**:
- [ ] `musubi init --lang zh-CN`で中国語ドキュメントが生成される
- [ ] 4つ全ての言語で有効なドキュメントが生成される
- [ ] 言語テンプレートがnpmパッケージに含まれている

**トレーサビリティ**: TST-P2-001

---

### REQ-P2-002: CI/CDパイプライン統合

**ID**: REQ-P2-002
**優先度**: P2（中）
**パターン**: Event-Driven

**要件**:
プルリクエストがオープンされた場合、システムは憲法準拠とトレーサビリティを自動的に検証しなければならない。

**機能要件**:
- 公式GitHub Actionsワークフロー
- 公式GitLab CI/CDテンプレート
- PRでの自動憲法準拠チェック
- トレーサビリティカバレッジレポート生成

**受入基準**:
- [ ] `uses: nahisaho/musubi-action@v1`でGitHub Actionsに統合できる
- [ ] PRコメントにコンプライアンスステータスが表示される
- [ ] トレーサビリティカバレッジ率が表示される
- [ ] 失敗したチェックがPRマージをブロックする

**トレーサビリティ**: TST-P2-002

---

### REQ-P2-003: クラウドサービス版

**ID**: REQ-P2-003
**優先度**: P2（中）
**パターン**: Optional Feature

**要件**:
チームがクラウドベースのコラボレーションを必要とする場合、システムはホスティングされたSaaSバージョンを提供しなければならない。

**機能要件**:
- Web UIダッシュボード
- GitHub/GitLab統合
- チーム管理（ロール、権限）
- リアルタイム共同編集

**受入基準**:
- [ ] musubi.devでサインアップが可能
- [ ] GitHub/GitLabでOAuthログインが可能
- [ ] チーム招待機能が動作する
- [ ] コラボレーター間でリアルタイム同期される

**トレーサビリティ**: TST-P2-003

---

### REQ-P2-004: チームコラボレーション強化

**ID**: REQ-P2-004
**優先度**: P2（中）
**パターン**: State-Driven

**要件**:
複数のチームメンバーが同時に仕様を編集している間、システムはコンフリクトを防止し、リアルタイム同期を可能にしなければならない。

**機能要件**:
- ロックフリー共同編集（CRDTベース）
- コンフリクト検出と解決UI
- 変更履歴と監査ログ

**受入基準**:
- [ ] 3人以上のユーザーがコンフリクトなく同時編集可能
- [ ] 必要に応じてコンフリクト解決UIが表示される
- [ ] 全ての変更の完全な監査ログが存在する

**トレーサビリティ**: TST-P2-004

---

## 5. P3要件（低：長期的改善）

### REQ-P3-001: ローカルLLMダイレクトサポート

**ID**: REQ-P3-001
**優先度**: P3（低）
**パターン**: Optional Feature

**要件**:
ユーザーがオフラインまたはプライバシー重視の環境を好む場合、システムはローカルLLMプロバイダーと直接統合しなければならない。

**対応プロバイダー**:
- Ollama（ダイレクト統合）
- LM Studio
- llama.cpp

**受入基準**:
- [ ] `musubi init --llm ollama:llama3`でOllamaを直接使用可能
- [ ] ローカルLLM使用時は外部APIコールなし
- [ ] クラウドLLMと同等のパフォーマンス

**トレーサビリティ**: TST-P3-001

---

### REQ-P3-002: コスト追跡ダッシュボード

**ID**: REQ-P3-002
**優先度**: P3（低）
**パターン**: Ubiquitous

**要件**:
システムは、全てのLLMインタラクションのAPI使用コストを追跡し表示しなければならない。

**機能要件**:
- リクエストごとのトークン数とコスト表示
- セッション/日/月ごとの集計
- コストアラート設定
- エクスポート機能（CSV、JSON）

**受入基準**:
- [ ] `musubi-costs`コマンドで月間API使用量とコストが表示される
- [ ] 設定した閾値でコストアラートがトリガーされる
- [ ] エクスポートに指定の全形式が含まれる

**トレーサビリティ**: TST-P3-002

---

### REQ-P3-003: チェックポイント機能

**ID**: REQ-P3-003
**優先度**: P3（低）
**パターン**: Event-Driven

**要件**:
ユーザーがチェックポイントを要求した場合、システムは現在のワークスペース状態の完全なスナップショットを保存しなければならない。

**機能要件**:
- 手動・自動チェックポイント作成
- チェックポイント間の差分比較
- 任意のチェックポイントへのロールバック

**受入基準**:
- [ ] `musubi-checkpoint save`でチェックポイントが作成される
- [ ] `musubi-checkpoint restore <id>`で状態が復元される
- [ ] `musubi-checkpoint diff <id1> <id2>`で差分が表示される

**トレーサビリティ**: TST-P3-003

---

## 6. トレーサビリティマトリックス

| 要件ID | 要件名 | 実装フェーズ | テストID | ステータス |
|--------|--------|-------------|----------|------------|
| REQ-P0-001 | GitHubリポジトリ最適化 | v2.2.0 | TST-P0-001 | 計画中 |
| REQ-P0-002 | Awesome List掲載 | v2.2.0 | TST-P0-002 | 計画中 |
| REQ-P0-003 | コンテンツマーケティング | v2.2.0 | TST-P0-003 | 計画中 |
| REQ-P1-001 | ブラウザ自動化機能 | v2.5.0 | TST-P1-001 | 計画中 |
| REQ-P1-002 | Web GUIダッシュボード | v2.5.0 | TST-P1-002 | 計画中 |
| REQ-P1-003 | VS Code Marketplace拡張 | v2.5.0 | TST-P1-003 | 計画中 |
| REQ-P1-004 | Spec Kit互換性 | v2.5.0 | TST-P1-004 | 計画中 |
| REQ-P2-001 | 多言語サポート | v3.0.0 | TST-P2-001 | 計画中 |
| REQ-P2-002 | CI/CDパイプライン統合 | v3.0.0 | TST-P2-002 | 計画中 |
| REQ-P2-003 | クラウドサービス版 | v3.0.0 | TST-P2-003 | 計画中 |
| REQ-P2-004 | チームコラボレーション強化 | v3.0.0 | TST-P2-004 | 計画中 |
| REQ-P3-001 | ローカルLLMサポート | v3.5.0 | TST-P3-001 | 計画中 |
| REQ-P3-002 | コスト追跡ダッシュボード | v3.5.0 | TST-P3-002 | 計画中 |
| REQ-P3-003 | チェックポイント機能 | v3.5.0 | TST-P3-003 | 計画中 |

---

## 7. 実装スケジュール

| バージョン | リリース目標 | 主要機能 | KPI目標 |
|-----------|-------------|----------|---------|
| v2.2.0 | 2026年Q1 | P0（コミュニティ成長） | スター: 100+ |
| v2.5.0 | 2026年Q2 | P1（機能差別化） | スター: 500+ |
| v3.0.0 | 2026年Q3 | P2（エコシステム拡大） | スター: 1,000+ |
| v3.5.0 | 2026年Q4 | P3（長期的改善） | スター: 2,000+ |

---

## 8. 付録

### 8.1 EARS形式リファレンス

| パターン | 構文 | 使用場面 |
|----------|------|----------|
| Ubiquitous | システムは〜しなければならない | 常に適用される要件 |
| Event-Driven | 〜の場合、〜しなければならない | 特定イベントで発動する要件 |
| State-Driven | 〜している間、〜しなければならない | 特定状態で適用される要件 |
| Optional Feature | 〜を好む場合、〜しなければならない | オプション機能の要件 |
| Unwanted Behavior | 〜の場合、〜してはならない | 禁止される動作 |

### 8.2 参照文書

- MUSUBI GitHubリポジトリ: https://github.com/nahisaho/musubi
- MUSUBI npmパッケージ: https://www.npmjs.com/package/musubi-sdd
- AIコーディングツール総合調査レポート 2025
- GitHub Spec Kit: https://github.com/github/spec-kit

### 8.3 文書履歴

| バージョン | 日付 | 作成者 | 変更内容 |
|-----------|------|--------|----------|
| 1.0 | 2025年12月7日 | MUSUBIチーム | 初版作成 |

---

*― 文書終了 ―*
