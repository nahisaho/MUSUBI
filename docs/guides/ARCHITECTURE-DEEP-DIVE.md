# MUSUBI Architecture Deep Dive

MUSUBI SDD ã®å†…éƒ¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨è¨­è¨ˆæ€æƒ³ã®è©³ç´°ã‚¬ã‚¤ãƒ‰ã€‚

---

## ğŸ“– ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ã‚³ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚³ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ](#ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ)
4. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
5. [ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³](#ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³)
6. [æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ](#æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ)
7. [è¨­è¨ˆæ±ºå®šè¨˜éŒ²ï¼ˆADRï¼‰](#è¨­è¨ˆæ±ºå®šè¨˜éŒ²adr)

---

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              MUSUBI SDD v5.x                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Presentation Layer                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚   CLI   â”‚  â”‚   GUI   â”‚  â”‚  VSCode â”‚  â”‚   API   â”‚  â”‚   MCP   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚ Commandsâ”‚  â”‚Dashboardâ”‚  â”‚Extensionâ”‚  â”‚  Server â”‚  â”‚ Server  â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Application Layer                            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚  Generators  â”‚  â”‚  Validators  â”‚  â”‚  Analyzers   â”‚               â”‚    â”‚
â”‚  â”‚  â”‚ (Req/Design/ â”‚  â”‚ (Constitutionâ”‚  â”‚ (Gap/Impact/ â”‚               â”‚    â”‚
â”‚  â”‚  â”‚  Tasks)      â”‚  â”‚  /EARS/Trace)â”‚  â”‚  Security)   â”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚ Orchestrationâ”‚  â”‚  Replanning  â”‚  â”‚  Monitoring  â”‚               â”‚    â”‚
â”‚  â”‚  â”‚   Engine     â”‚  â”‚   Engine     â”‚  â”‚   & Costs    â”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         Domain Layer                                â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚   Steering   â”‚  â”‚    Agents    â”‚  â”‚    Skills    â”‚               â”‚    â”‚
â”‚  â”‚  â”‚   (Memory)   â”‚  â”‚  (Registry)  â”‚  â”‚  (Registry)  â”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚  Guardrails  â”‚  â”‚  Reasoning   â”‚  â”‚  Patterns    â”‚               â”‚    â”‚
â”‚  â”‚  â”‚ (Input/Outputâ”‚  â”‚ (Self-Correctâ”‚  â”‚ (Sequential/ â”‚               â”‚    â”‚
â”‚  â”‚  â”‚  /Safety)    â”‚  â”‚  /Planning)  â”‚  â”‚  Triage/...)â”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      Infrastructure Layer                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚ LLM Providersâ”‚  â”‚  Integrationsâ”‚  â”‚  Performance â”‚               â”‚    â”‚
â”‚  â”‚  â”‚ (OpenAI/     â”‚  â”‚  (GitHub/    â”‚  â”‚  (Cache/     â”‚               â”‚    â”‚
â”‚  â”‚  â”‚  Anthropic)  â”‚  â”‚   JIRA/MCP)  â”‚  â”‚   Memory)    â”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚    â”‚
â”‚  â”‚  â”‚   Storage    â”‚  â”‚   Converters â”‚  â”‚  Enterprise  â”‚               â”‚    â”‚
â”‚  â”‚  â”‚  (File/DB)   â”‚  â”‚  (IR/Parsers)â”‚  â”‚ (Multi-Tenantâ”‚               â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¨­è¨ˆåŸå‰‡

| åŸå‰‡ | èª¬æ˜ | å®Ÿè£…ä¾‹ |
|------|------|--------|
| **Separation of Concerns** | å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ç‹¬ç«‹ã—ãŸè²¬å‹™ | Generators / Validators / Analyzers |
| **Dependency Inversion** | ä¸Šä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯æŠ½è±¡ã«ä¾å­˜ | LLM Provider Interface |
| **Open-Closed** | æ‹¡å¼µã«é–‹ãã€ä¿®æ­£ã«é–‰ã˜ã‚‹ | Plugin Architecture |
| **Single Responsibility** | 1ã‚¯ãƒ©ã‚¹1è²¬å‹™ | å„ Skill ãŒå˜ä¸€æ©Ÿèƒ½ |
| **Interface Segregation** | å¿…è¦ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®ã¿å…¬é–‹ | Public API vs Internal |

---

## ã‚³ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### C4 ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå›³

```mermaid
C4Context
    title System Context - MUSUBI SDD

    Person(developer, "Developer", "Uses MUSUBI for SDD workflow")
    Person(agent, "AI Agent", "Claude/Copilot/Cursor")

    System(musubi, "MUSUBI SDD", "Specification Driven Development Framework")

    System_Ext(llm, "LLM Providers", "OpenAI, Anthropic, Ollama")
    System_Ext(vcs, "Version Control", "GitHub, GitLab")
    System_Ext(pm, "Project Management", "JIRA, Azure DevOps")
    System_Ext(mcp, "MCP Servers", "External tool providers")

    Rel(developer, musubi, "Uses CLI/GUI")
    Rel(agent, musubi, "Reads AGENTS.md, executes commands")
    Rel(musubi, llm, "Generates content via API")
    Rel(musubi, vcs, "Syncs requirements, tracks changes")
    Rel(musubi, pm, "Syncs issues, exports reports")
    Rel(musubi, mcp, "Discovers and invokes tools")
```

### C4 ã‚³ãƒ³ãƒ†ãƒŠå›³

```mermaid
C4Container
    title Container Diagram - MUSUBI SDD

    Person(developer, "Developer")

    Container_Boundary(cli, "CLI Application") {
        Container(bin, "CLI Commands", "Node.js", "musubi-*.js commands")
        Container(gui, "GUI Server", "Express.js", "Web dashboard")
    }

    Container_Boundary(core, "Core Engine") {
        Container(generators, "Generators", "Node.js", "Req/Design/Tasks generation")
        Container(validators, "Validators", "Node.js", "EARS/Constitution validation")
        Container(analyzers, "Analyzers", "Node.js", "Gap/Impact/Security analysis")
        Container(orchestrator, "Orchestrator", "Node.js", "Multi-agent coordination")
    }

    Container_Boundary(domain, "Domain Services") {
        Container(agents, "Agent Registry", "Node.js", "Agent management")
        Container(skills, "Skill Registry", "Node.js", "Skill management")
        Container(steering, "Steering Manager", "Node.js", "Project memory")
    }

    Container_Boundary(infra, "Infrastructure") {
        Container(llm, "LLM Providers", "Node.js", "API adapters")
        Container(storage, "Storage", "Node.js", "File/DB access")
        Container(integrations, "Integrations", "Node.js", "External services")
    }

    Rel(developer, bin, "Executes commands")
    Rel(developer, gui, "Views dashboard")
    Rel(bin, generators, "Invokes")
    Rel(bin, validators, "Invokes")
    Rel(orchestrator, agents, "Coordinates")
    Rel(agents, skills, "Uses")
    Rel(generators, llm, "Calls")
    Rel(generators, storage, "Reads/Writes")
```

### C4 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›³ï¼ˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

```mermaid
C4Component
    title Component Diagram - Orchestration Engine

    Container_Boundary(orch, "Orchestration Engine") {
        Component(engine, "Orchestration Engine", "Class", "Main coordinator")
        Component(executor, "Workflow Executor", "Class", "Executes workflow steps")
        Component(patterns, "Pattern Registry", "Class", "Orchestration patterns")
        Component(reasoning, "Reasoning Engine", "Class", "Planning and decisions")
        Component(replanning, "Replanning Engine", "Class", "Adaptive goal modification")
        Component(guardrails, "Guardrails", "Classes", "Input/Output validation")
    }

    Container_Boundary(agents, "Agent System") {
        Component(registry, "Agent Registry", "Class", "Agent management")
        Component(loop, "Agent Loop", "Class", "Agent execution loop")
        Component(tools, "Function Tools", "Class", "Tool invocation")
    }

    Rel(engine, executor, "Delegates to")
    Rel(engine, patterns, "Selects pattern from")
    Rel(executor, reasoning, "Uses for decisions")
    Rel(executor, replanning, "Triggers when needed")
    Rel(executor, guardrails, "Validates I/O through")
    Rel(executor, registry, "Gets agents from")
    Rel(registry, loop, "Executes via")
    Rel(loop, tools, "Invokes")
```

---

## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ index.js                    # Public API ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ phase4-integration.js       # Phase 4 çµ±åˆ
â”œâ”€â”€ phase5-integration.js       # Phase 5 çµ±åˆ
â”‚
â”œâ”€â”€ agents/                     # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ index.js               # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ agent-loop.js          # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œãƒ«ãƒ¼ãƒ—
â”‚   â”œâ”€â”€ function-tool.js       # ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—æŠ½è±¡åŒ–
â”‚   â”œâ”€â”€ registry.js            # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¬ã‚¸ã‚¹ãƒˆãƒª
â”‚   â”œâ”€â”€ schema-generator.js    # JSONã‚¹ã‚­ãƒ¼ãƒç”Ÿæˆ
â”‚   â”œâ”€â”€ agentic/               # Agentic ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ code-generator.js  # ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ code-reviewer.js   # ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â””â”€â”€ browser/               # ãƒ–ãƒ©ã‚¦ã‚¶ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ action-executor.js # ãƒ–ãƒ©ã‚¦ã‚¶ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
â”‚       â”œâ”€â”€ ai-comparator.js   # AI ãƒ™ãƒ¼ã‚¹æ¯”è¼ƒ
â”‚       â”œâ”€â”€ context-manager.js # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç®¡ç†
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ ai/                         # AI æ©Ÿèƒ½
â”‚   â”œâ”€â”€ index.js               # AI ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ advanced-ai.js         # é«˜åº¦ãªAIæ©Ÿèƒ½
â”‚       â”œâ”€â”€ ModelRegistry      # ãƒ¢ãƒ‡ãƒ«ãƒ¬ã‚¸ã‚¹ãƒˆãƒª
â”‚       â”œâ”€â”€ ModelRouter        # ã‚¿ã‚¹ã‚¯ãƒ™ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚       â”œâ”€â”€ ContextWindowManager # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç®¡ç†
â”‚       â”œâ”€â”€ SemanticChunker    # ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°
â”‚       â”œâ”€â”€ CodeVectorStore    # ã‚³ãƒ¼ãƒ‰ãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆã‚¢
â”‚       â””â”€â”€ RAGPipeline        # RAG ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”‚
â”œâ”€â”€ analyzers/                  # åˆ†æã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ ast-extractor.js       # AST æŠ½å‡º
â”‚   â”œâ”€â”€ codegraph-auto-update.js # ã‚³ãƒ¼ãƒ‰ã‚°ãƒ©ãƒ•è‡ªå‹•æ›´æ–°
â”‚   â”œâ”€â”€ complexity-analyzer.js # è¤‡é›‘åº¦åˆ†æ
â”‚   â”œâ”€â”€ context-optimizer.js   # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæœ€é©åŒ–
â”‚   â”œâ”€â”€ gap-detector.js        # ã‚®ãƒ£ãƒƒãƒ—æ¤œå‡º
â”‚   â”œâ”€â”€ impact-analyzer.js     # å½±éŸ¿åˆ†æ
â”‚   â”œâ”€â”€ large-project-analyzer.js # å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ†æ
â”‚   â”œâ”€â”€ repository-map.js      # ãƒªãƒã‚¸ãƒˆãƒªãƒãƒƒãƒ”ãƒ³ã‚°
â”‚   â”œâ”€â”€ security-analyzer.js   # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ†æ
â”‚   â”œâ”€â”€ stuck-detector.js      # ã‚¹ã‚¿ãƒƒã‚¯æ¤œå‡º
â”‚   â””â”€â”€ traceability.js        # ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£åˆ†æ
â”‚
â”œâ”€â”€ converters/                 # ä»•æ§˜å¤‰æ›
â”‚   â”œâ”€â”€ index.js               # å¤‰æ›ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ ir/                    # ä¸­é–“è¡¨ç¾
â”‚   â”‚   â””â”€â”€ types.js           # IR å‹å®šç¾©
â”‚   â”œâ”€â”€ parsers/               # ãƒ‘ãƒ¼ã‚µãƒ¼
â”‚   â”‚   â”œâ”€â”€ musubi-parser.js   # MUSUBI ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ openapi-parser.js  # OpenAPI
â”‚   â”‚   â””â”€â”€ speckit-parser.js  # SpecKit
â”‚   â””â”€â”€ writers/               # ãƒ©ã‚¤ã‚¿ãƒ¼
â”‚       â”œâ”€â”€ musubi-writer.js   # MUSUBI å‡ºåŠ›
â”‚       â””â”€â”€ speckit-writer.js  # SpecKit å‡ºåŠ›
â”‚
â”œâ”€â”€ enterprise/                 # ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½
â”‚   â”œâ”€â”€ index.js               # ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ multi-tenant.js        # ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆ
â”‚       â”œâ”€â”€ TenantContext      # ãƒ†ãƒŠãƒ³ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
â”‚       â”œâ”€â”€ TenantIsolation    # ãƒ‡ãƒ¼ã‚¿åˆ†é›¢
â”‚       â”œâ”€â”€ RBACManager        # ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹
â”‚       â”œâ”€â”€ UsageQuota         # ä½¿ç”¨é‡ã‚¯ã‚©ãƒ¼ã‚¿
â”‚       â””â”€â”€ AuditLogger        # ç›£æŸ»ãƒ­ã‚°
â”‚
â”œâ”€â”€ generators/                 # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
â”‚   â”œâ”€â”€ design.js              # è¨­è¨ˆç”Ÿæˆ
â”‚   â”œâ”€â”€ requirements.js        # è¦ä»¶ç”Ÿæˆ
â”‚   â”œâ”€â”€ rust-migration-generator.js # Rust ç§»è¡Œ
â”‚   â””â”€â”€ tasks.js               # ã‚¿ã‚¹ã‚¯ç”Ÿæˆ
â”‚
â”œâ”€â”€ gui/                        # Web GUI
â”‚   â”œâ”€â”€ server.js              # Express ã‚µãƒ¼ãƒãƒ¼
â”‚   â”œâ”€â”€ public/                # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â””â”€â”€ index.html         # SPA ã‚¨ãƒ³ãƒˆãƒª
â”‚   â””â”€â”€ services/              # GUI ã‚µãƒ¼ãƒ“ã‚¹
â”‚       â”œâ”€â”€ file-watcher.js    # ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–
â”‚       â”œâ”€â”€ project-scanner.js # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚­ãƒ£ãƒ³
â”‚       â”œâ”€â”€ replanning-service.js # ãƒªãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°
â”‚       â”œâ”€â”€ traceability-service.js # ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ workflow-service.js # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
â”‚
â”œâ”€â”€ integrations/               # å¤–éƒ¨çµ±åˆ
â”‚   â”œâ”€â”€ index.js               # çµ±åˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ cicd.js                # CI/CD çµ±åˆ
â”‚   â”œâ”€â”€ codegraph-mcp.js       # CodeGraph MCP
â”‚   â”œâ”€â”€ documentation.js       # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆçµ±åˆ
â”‚   â”œâ”€â”€ enterprise-integrations.js # ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºçµ±åˆ
â”‚   â”‚   â”œâ”€â”€ JiraIntegration    # JIRA
â”‚   â”‚   â”œâ”€â”€ AzureDevOpsIntegration # Azure DevOps
â”‚   â”‚   â”œâ”€â”€ GitLabIntegration  # GitLab
â”‚   â”‚   â”œâ”€â”€ SlackIntegration   # Slack
â”‚   â”‚   â”œâ”€â”€ TeamsIntegration   # Teams
â”‚   â”‚   â””â”€â”€ SSOIntegration     # SSO
â”‚   â”œâ”€â”€ examples.js            # ã‚µãƒ³ãƒ—ãƒ«çµ±åˆ
â”‚   â”œâ”€â”€ github-client.js       # GitHub ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ mcp-connector.js       # MCP æ¥ç¶š
â”‚   â”œâ”€â”€ mcp/                   # MCP ã‚µãƒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ mcp-context-provider.js
â”‚   â”‚   â”œâ”€â”€ mcp-discovery.js
â”‚   â”‚   â””â”€â”€ mcp-tool-registry.js
â”‚   â”œâ”€â”€ platforms.js           # ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çµ±åˆ
â”‚   â””â”€â”€ tool-discovery.js      # ãƒ„ãƒ¼ãƒ«æ¤œå‡º
â”‚
â”œâ”€â”€ llm-providers/              # LLM ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
â”‚   â”œâ”€â”€ index.js               # ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ base-provider.js       # ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ anthropic-provider.js  # Anthropic
â”‚   â”œâ”€â”€ copilot-provider.js    # GitHub Copilot
â”‚   â”œâ”€â”€ ollama-provider.js     # Ollama
â”‚   â””â”€â”€ openai-provider.js     # OpenAI
â”‚
â”œâ”€â”€ managers/                   # ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
â”‚   â”œâ”€â”€ index.js               # ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ agent-memory.js        # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¡ãƒ¢ãƒª
â”‚   â”œâ”€â”€ change.js              # å¤‰æ›´ç®¡ç†
â”‚   â”œâ”€â”€ checkpoint-manager.js  # ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ delta-spec.js          # ãƒ‡ãƒ«ã‚¿ä»•æ§˜
â”‚   â”œâ”€â”€ memory-condenser.js    # ãƒ¡ãƒ¢ãƒªå‡ç¸®
â”‚   â”œâ”€â”€ repo-skill-manager.js  # ãƒªãƒã‚¸ãƒˆãƒªã‚¹ã‚­ãƒ«
â”‚   â”œâ”€â”€ skill-loader.js        # ã‚¹ã‚­ãƒ«ãƒ­ãƒ¼ãƒ€ãƒ¼
â”‚   â”œâ”€â”€ skill-tools.js         # ã‚¹ã‚­ãƒ«ãƒ„ãƒ¼ãƒ«
â”‚   â””â”€â”€ workflow.js            # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç®¡ç†
â”‚
â”œâ”€â”€ monitoring/                 # ç›£è¦–ãƒ»ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
â”‚   â”œâ”€â”€ index.js               # ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ cost-tracker.js        # ã‚³ã‚¹ãƒˆè¿½è·¡
â”‚   â”œâ”€â”€ incident-manager.js    # ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç®¡ç†
â”‚   â”œâ”€â”€ observability.js       # å¯è¦³æ¸¬æ€§
â”‚   â”œâ”€â”€ quality-dashboard.js   # å“è³ªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â””â”€â”€ release-manager.js     # ãƒªãƒªãƒ¼ã‚¹ç®¡ç†
â”‚
â”œâ”€â”€ orchestration/              # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ index.js               # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ orchestration-engine.js # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ workflow-executor.js   # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œ
â”‚   â”œâ”€â”€ workflow-orchestrator.js # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼
â”‚   â”œâ”€â”€ skill-executor.js      # ã‚¹ã‚­ãƒ«å®Ÿè¡Œ
â”‚   â”œâ”€â”€ skill-registry.js      # ã‚¹ã‚­ãƒ«ãƒ¬ã‚¸ã‚¹ãƒˆãƒª
â”‚   â”œâ”€â”€ pattern-registry.js    # ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ¬ã‚¸ã‚¹ãƒˆãƒª
â”‚   â”œâ”€â”€ mcp-tool-adapters.js   # MCP ãƒ„ãƒ¼ãƒ«ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼
â”‚   â”œâ”€â”€ agent-skill-binding.js # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ-ã‚¹ã‚­ãƒ«ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
â”‚   â”œâ”€â”€ error-handler.js       # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â”‚   â”œâ”€â”€ workflow-examples.js   # ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹
â”‚   â”œâ”€â”€ guardrails/            # ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ base-guardrail.js  # ãƒ™ãƒ¼ã‚¹ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ guardrail-rules.js # ãƒ«ãƒ¼ãƒ«å®šç¾©
â”‚   â”‚   â”œâ”€â”€ input-guardrail.js # å…¥åŠ›ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ output-guardrail.js # å‡ºåŠ›ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«
â”‚   â”‚   â””â”€â”€ safety-check.js    # å®‰å…¨ãƒã‚§ãƒƒã‚¯
â”‚   â”œâ”€â”€ patterns/              # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³
â”‚   â”‚   â”œâ”€â”€ auto.js            # è‡ªå‹•é¸æŠ
â”‚   â”‚   â”œâ”€â”€ group-chat.js      # ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ handoff.js         # ãƒãƒ³ãƒ‰ã‚ªãƒ•
â”‚   â”‚   â”œâ”€â”€ human-in-loop.js   # Human-in-the-Loop
â”‚   â”‚   â”œâ”€â”€ nested.js          # ãƒã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ sequential.js      # ã‚·ãƒ¼ã‚±ãƒ³ã‚·ãƒ£ãƒ«
â”‚   â”‚   â”œâ”€â”€ swarm.js           # ã‚¹ã‚¦ã‚©ãƒ¼ãƒ 
â”‚   â”‚   â””â”€â”€ triage.js          # ãƒˆãƒªã‚¢ãƒ¼ã‚¸
â”‚   â”œâ”€â”€ reasoning/             # æ¨è«–ã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”‚   â”œâ”€â”€ planning-engine.js # ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°
â”‚   â”‚   â”œâ”€â”€ reasoning-engine.js # æ¨è«–
â”‚   â”‚   â””â”€â”€ self-correction.js # è‡ªå·±ä¿®æ­£
â”‚   â””â”€â”€ replanning/            # ãƒªãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°
â”‚       â”œâ”€â”€ adaptive-goal-modifier.js # é©å¿œçš„ç›®æ¨™ä¿®æ­£
â”‚       â”œâ”€â”€ alternative-generator.js # ä»£æ›¿æ¡ˆç”Ÿæˆ
â”‚       â”œâ”€â”€ config.js          # è¨­å®š
â”‚       â”œâ”€â”€ goal-progress-tracker.js # ç›®æ¨™é€²æ—è¿½è·¡
â”‚       â”œâ”€â”€ plan-evaluator.js  # ãƒ—ãƒ©ãƒ³è©•ä¾¡
â”‚       â”œâ”€â”€ plan-monitor.js    # ãƒ—ãƒ©ãƒ³ç›£è¦–
â”‚       â”œâ”€â”€ proactive-path-optimizer.js # äº‹å‰æœ€é©åŒ–
â”‚       â”œâ”€â”€ replan-history.js  # ãƒªãƒ—ãƒ©ãƒ³å±¥æ­´
â”‚       â””â”€â”€ replanning-engine.js # ãƒªãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³
â”‚
â”œâ”€â”€ performance/                # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
â”‚   â”œâ”€â”€ index.js               # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ cache-manager.js       # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†
â”‚   â”œâ”€â”€ lazy-loader.js         # é…å»¶ãƒ­ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ memory-optimizer.js    # ãƒ¡ãƒ¢ãƒªæœ€é©åŒ–
â”‚   â””â”€â”€ startup-optimizer.js   # èµ·å‹•æœ€é©åŒ–
â”‚
â”œâ”€â”€ reporters/                  # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
â”‚   â”œâ”€â”€ coverage-report.js     # ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ hierarchical-reporter.js # éšå±¤ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ traceability-matrix-report.js # ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ãƒãƒˆãƒªã‚¯ã‚¹
â”‚
â”œâ”€â”€ resolvers/                  # å•é¡Œè§£æ±º
â”‚   â””â”€â”€ issue-resolver.js      # èª²é¡Œè§£æ±º
â”‚
â”œâ”€â”€ steering/                   # ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ¢ãƒªï¼‰
â”‚   â”œâ”€â”€ index.js               # ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ advanced-validation.js # é«˜åº¦ãªæ¤œè¨¼
â”‚   â”œâ”€â”€ auto-updater.js        # è‡ªå‹•æ›´æ–°
â”‚   â”œâ”€â”€ quality-metrics.js     # å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹
â”‚   â”œâ”€â”€ steering-auto-update.js # ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°è‡ªå‹•æ›´æ–°
â”‚   â”œâ”€â”€ steering-validator.js  # ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°æ¤œè¨¼
â”‚   â””â”€â”€ template-constraints.js # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåˆ¶ç´„
â”‚
â”œâ”€â”€ templates/                  # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ index.js               # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ locale-manager.js      # å¤šè¨€èªç®¡ç†
â”‚   â”œâ”€â”€ template-constraints.js # åˆ¶ç´„å®šç¾©
â”‚   â”œâ”€â”€ agents/                # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ claude-code/       # Claude Code
â”‚   â”‚   â”œâ”€â”€ codex/             # Codex
â”‚   â”‚   â”œâ”€â”€ cursor/            # Cursor
â”‚   â”‚   â”œâ”€â”€ gemini-cli/        # Gemini CLI
â”‚   â”‚   â”œâ”€â”€ github-copilot/    # GitHub Copilot
â”‚   â”‚   â”œâ”€â”€ qwen-code/         # Qwen Code
â”‚   â”‚   â”œâ”€â”€ shared/            # å…±é€š
â”‚   â”‚   â””â”€â”€ windsurf/          # Windsurf
â”‚   â”œâ”€â”€ architectures/         # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ memories/              # ãƒ¡ãƒ¢ãƒªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ shared/                # å…±æœ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â””â”€â”€ skills/                # ã‚¹ã‚­ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚
â””â”€â”€ validators/                 # æ¤œè¨¼ã‚¨ãƒ³ã‚¸ãƒ³
    â”œâ”€â”€ advanced-validation.js # é«˜åº¦ãªæ¤œè¨¼
    â”œâ”€â”€ constitution.js        # æ†²æ³•æ¤œè¨¼
    â”œâ”€â”€ constitutional-validator.js # æ†²æ³•ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼
    â”œâ”€â”€ critic-system.js       # ã‚¯ãƒªãƒ†ã‚£ãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ 
    â”œâ”€â”€ delta-format.js        # ãƒ‡ãƒ«ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¤œè¨¼
    â””â”€â”€ traceability-validator.js # ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£æ¤œè¨¼
```

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä¾å­˜é–¢ä¿‚

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   bin/*.js   â”‚ â† CLI ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  src/index   â”‚ â† Public API
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚               â”‚               â”‚
           â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚generatorsâ”‚    â”‚validatorsâ”‚    â”‚analyzers â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚orchestrationâ”‚ â† ä¸­å¤®èª¿æ•´
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  agents  â”‚    â”‚  skills  â”‚    â”‚ patterns â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              Infrastructure                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚   llm   â”‚  â”‚integrationsâ”‚  â”‚performanceâ”‚   â”‚
    â”‚  â”‚providersâ”‚  â”‚          â”‚  â”‚          â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### SDD ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SDD Workflow Data Flow                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. REQUIREMENTS PHASE                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚                                                                             â”‚
â”‚  User Input â”€â”€â”€â”€â”€â–º Requirements â”€â”€â”€â”€â”€â–º EARS Validator â”€â”€â”€â”€â”€â–º storage/      â”‚
â”‚  "User auth"       Generator          (Constitution)        features/      â”‚
â”‚                         â”‚                   â”‚               req.md         â”‚
â”‚                         â”‚                   â”‚                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚   LLM   â”‚         â”‚ Steering â”‚                        â”‚
â”‚                    â”‚ Providerâ”‚         â”‚  Memory  â”‚                        â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                             â”‚
â”‚  2. DESIGN PHASE                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚                                                                             â”‚
â”‚  Requirements â”€â”€â”€â”€â”€â–º Design â”€â”€â”€â”€â”€â–º C4 Validator â”€â”€â”€â”€â”€â–º storage/            â”‚
â”‚  (REQ-*.md)         Generator     (Architecture)       features/           â”‚
â”‚                         â”‚              â”‚               design.md           â”‚
â”‚                         â”‚              â”‚                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                              â”‚
â”‚                    â”‚   LLM   â”‚    â”‚   ADR   â”‚                              â”‚
â”‚                    â”‚ Providerâ”‚    â”‚Generatorâ”‚                              â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                             â”‚
â”‚  3. TASKS PHASE                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚                                                                             â”‚
â”‚  Design â”€â”€â”€â”€â”€â–º Task â”€â”€â”€â”€â”€â–º Traceability â”€â”€â”€â”€â”€â–º storage/                    â”‚
â”‚  (design.md)  Generator    Validator           features/                   â”‚
â”‚                   â”‚            â”‚               tasks.md                    â”‚
â”‚                   â”‚            â”‚                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”                                      â”‚
â”‚              â”‚   LLM   â”‚  â”‚ Trace   â”‚                                      â”‚
â”‚              â”‚ Providerâ”‚  â”‚ Matrix  â”‚                                      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                             â”‚
â”‚  4. IMPLEMENTATION PHASE                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚                                                                             â”‚
â”‚  Tasks â”€â”€â”€â”€â”€â–º Orchestrator â”€â”€â”€â”€â”€â–º Agent Loop â”€â”€â”€â”€â”€â–º Code Files             â”‚
â”‚  (TASK-*)        â”‚                    â”‚                â”‚                   â”‚
â”‚                  â”‚                    â”‚                â”‚                   â”‚
â”‚             â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”               â”‚
â”‚             â”‚ Pattern â”‚          â”‚  Skill  â”‚     â”‚ Guardrailsâ”‚              â”‚
â”‚             â”‚Selectionâ”‚          â”‚Executor â”‚     â”‚(I/O Check)â”‚              â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â”‚  5. VALIDATION PHASE                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚                                                                             â”‚
â”‚  All Artifacts â”€â”€â”€â”€â”€â–º Validator â”€â”€â”€â”€â”€â–º Traceability â”€â”€â”€â”€â”€â–º Report          â”‚
â”‚                          â”‚             Matrix              â”‚               â”‚
â”‚                          â”‚                â”‚                â”‚               â”‚
â”‚                     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”‚
â”‚                     â”‚Constitutionâ”‚    â”‚Coverage â”‚      â”‚ Gap     â”‚          â”‚
â”‚                     â”‚ Checker   â”‚    â”‚ Report  â”‚      â”‚Detector â”‚          â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ•ãƒ­ãƒ¼

```
                    Input (Natural Language)
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Context Loader â”‚ â† Steering files
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   LLM Request   â”‚ â† Prompt + Context
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  LLM Response   â”‚ â† Generated content
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Parser      â”‚ â† Extract structure
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Validator    â”‚ â† EARS/Constitution
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
                    â–¼                 â–¼
              âœ… Valid           âŒ Invalid
                    â”‚                 â”‚
                    â–¼                 â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Storage â”‚    â”‚   Self   â”‚
              â”‚   Write  â”‚    â”‚Correctionâ”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â””â”€â”€â”€â”€â–º Retry
```

---

## ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³

### ãƒ‘ã‚¿ãƒ¼ãƒ³é¸æŠãƒ­ã‚¸ãƒƒã‚¯

```javascript
// src/orchestration/pattern-registry.js (æ¦‚å¿µå›³)

class PatternSelector {
  selectPattern(task, context) {
    const analysis = this.analyzeTask(task);
    
    // è¤‡é›‘åº¦ã«åŸºã¥ãé¸æŠ
    if (analysis.complexity === 'high' && analysis.requiresExpertise) {
      return 'triage';  // ãƒ«ãƒ¼ã‚¿ãƒ¼ãŒå°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æŒ¯ã‚Šåˆ†ã‘
    }
    
    if (analysis.parallelizable && analysis.independentSubtasks > 3) {
      return 'swarm';   // ä¸¦åˆ—å®Ÿè¡Œ
    }
    
    if (analysis.requiresHumanApproval) {
      return 'human-in-loop';  // äººé–“ã®æ‰¿èªã‚’æŒŸã‚€
    }
    
    if (analysis.steps && analysis.steps.length > 1) {
      return 'sequential';  // é †æ¬¡å®Ÿè¡Œ
    }
    
    return 'auto';  // è‡ªå‹•é¸æŠ
  }
}
```

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Agent Loop                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Start   â”‚â”€â”€â”€â–ºâ”‚  Think   â”‚â”€â”€â”€â–ºâ”‚   Act    â”‚â”€â”€â”€â–ºâ”‚ Observe  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚               â”‚               â”‚         â”‚
â”‚                       â”‚               â”‚               â”‚         â”‚
â”‚                  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”‚
â”‚                  â”‚Reasoningâ”‚     â”‚  Tool   â”‚     â”‚ Result  â”‚   â”‚
â”‚                  â”‚ Engine  â”‚     â”‚Executionâ”‚     â”‚ Parser  â”‚   â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                       â”‚               â”‚               â”‚         â”‚
â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                       â”‚                         â”‚
â”‚                                       â–¼                         â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                              â”‚  Goal Check    â”‚                 â”‚
â”‚                              â”‚ (Complete?)    â”‚                 â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                      â”‚                          â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                           â”‚                     â”‚               â”‚
â”‚                           â–¼                     â–¼               â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                     â”‚  Done    â”‚          â”‚  Loop    â”‚          â”‚
â”‚                     â”‚ (Return) â”‚          â”‚ (Retry)  â”‚          â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
                         Input
                           â”‚
                           â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    Input Guardrail     â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
              â”‚  â”‚ â€¢ Prompt Injection â”‚  â”‚
              â”‚  â”‚ â€¢ PII Detection   â”‚  â”‚
              â”‚  â”‚ â€¢ Rate Limiting   â”‚  â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     Agent Execution    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Output Guardrail     â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
              â”‚  â”‚ â€¢ Content Safety  â”‚  â”‚
              â”‚  â”‚ â€¢ Schema Valid.   â”‚  â”‚
              â”‚  â”‚ â€¢ Constitution    â”‚  â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                       Output
```

---

## æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ

### 1. LLM ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æ‹¡å¼µ

```javascript
// src/llm-providers/base-provider.js
class BaseLLMProvider {
  // å¿…é ˆãƒ¡ã‚½ãƒƒãƒ‰
  async complete(prompt, options) { throw new Error('Not implemented'); }
  async chat(messages, options) { throw new Error('Not implemented'); }
  async embed(text) { throw new Error('Not implemented'); }
  
  // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰
  async stream(prompt, options) { /* ... */ }
  getTokenCount(text) { /* ... */ }
}

// ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ä¾‹
class MyCustomProvider extends BaseLLMProvider {
  async complete(prompt, options) {
    const response = await fetch('https://my-llm-api.com/complete', {
      method: 'POST',
      body: JSON.stringify({ prompt, ...options })
    });
    return response.json();
  }
}
```

### 2. ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼æ‹¡å¼µ

```javascript
// ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼ã®è¿½åŠ 
const { ValidatorRegistry } = require('musubi-sdd');

ValidatorRegistry.register('my-custom-validator', {
  name: 'My Custom Validator',
  targetTypes: ['requirements', 'design'],
  
  async validate(content, context) {
    const errors = [];
    
    // ã‚«ã‚¹ã‚¿ãƒ æ¤œè¨¼ãƒ­ã‚¸ãƒƒã‚¯
    if (!content.includes('å¿…é ˆã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰')) {
      errors.push({
        code: 'MISSING_KEYWORD',
        message: 'Required keyword not found',
        severity: 'error'
      });
    }
    
    return { valid: errors.length === 0, errors };
  }
});
```

### 3. ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³æ‹¡å¼µ

```javascript
// ã‚«ã‚¹ã‚¿ãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è¿½åŠ 
const { PatternRegistry } = require('musubi-sdd');

PatternRegistry.register('my-custom-pattern', {
  name: 'My Custom Pattern',
  description: 'A custom orchestration pattern',
  
  async execute(task, agents, context) {
    // ã‚«ã‚¹ã‚¿ãƒ ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
    const results = [];
    
    for (const agent of agents) {
      const result = await agent.execute(task, context);
      results.push(result);
      
      // ã‚«ã‚¹ã‚¿ãƒ æ¡ä»¶ã§ãƒãƒ³ãƒ‰ã‚ªãƒ•
      if (result.needsExpert) {
        const expert = context.findExpert(result.expertType);
        const expertResult = await expert.execute(task, context);
        results.push(expertResult);
      }
    }
    
    return this.aggregateResults(results);
  }
});
```

### 4. ã‚¹ã‚­ãƒ«æ‹¡å¼µ

```javascript
// ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚­ãƒ«ã®è¿½åŠ 
const { SkillRegistry } = require('musubi-sdd');

SkillRegistry.register('my-custom-skill', {
  name: 'My Custom Skill',
  triggers: ['my-keyword', 'custom-task'],
  
  context: `
    ## My Custom Skill
    
    This skill provides custom functionality for...
    
    ### Capabilities
    - Capability 1
    - Capability 2
  `,
  
  actions: {
    'my-action': {
      description: 'Perform my custom action',
      async execute(params, context) {
        // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
        return { success: true, result: 'Action completed' };
      }
    }
  }
});
```

---

## è¨­è¨ˆæ±ºå®šè¨˜éŒ²ï¼ˆADRï¼‰

### ADR-001: ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ¡ç”¨  
**æ—¥ä»˜**: 2024-01-01  

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**:  
MUSUBI ã¯å¤šæ§˜ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼ˆCLIã€GUIã€VSCode æ‹¡å¼µã€MCP ã‚µãƒ¼ãƒãƒ¼ï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

**æ±ºå®š**:  
ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã€å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ç‹¬ç«‹ã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦å®Ÿè£…ã€‚

**çµæœ**:
- âœ… å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç‹¬ç«‹ã—ã¦ãƒ†ã‚¹ãƒˆå¯èƒ½
- âœ… æ–°ã—ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆAPIã€VSCodeç­‰ï¼‰ã‚’å®¹æ˜“ã«è¿½åŠ 
- âœ… ä¾å­˜é–¢ä¿‚ãŒæ˜ç¢ºã§ä¿å®ˆæ€§ãŒé«˜ã„
- âš ï¸ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ã®é€£æºã«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ãŒå¿…è¦

---

### ADR-002: LLM ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æŠ½è±¡åŒ–

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ¡ç”¨  
**æ—¥ä»˜**: 2024-01-15  

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**:  
è¤‡æ•°ã® LLMï¼ˆOpenAIã€Anthropicã€Ollamaï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€å°†æ¥ã®æ–°ã—ã„ãƒ¢ãƒ‡ãƒ«ã«ã‚‚å¯¾å¿œã—ãŸã„ã€‚

**æ±ºå®š**:  
`BaseLLMProvider` æŠ½è±¡ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã€å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯ç¶™æ‰¿ã—ã¦å®Ÿè£…ã€‚

**çµæœ**:
- âœ… æ–°ã—ã„ LLM ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’å®¹æ˜“ã«è¿½åŠ 
- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è¨­å®šå¤‰æ›´ã®ã¿ã§ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’åˆ‡ã‚Šæ›¿ãˆå¯èƒ½
- âœ… ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å›ºæœ‰ã®æ©Ÿèƒ½ã‚‚ `options` ã§å¯¾å¿œ
- âš ï¸ å„ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã® API å·®ç•°ã‚’å¸åã™ã‚‹ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰

---

### ADR-003: ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ 

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ¡ç”¨  
**æ—¥ä»˜**: 2024-03-01  

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**:  
LLM å‡ºåŠ›ã®å“è³ªã¨å®‰å…¨æ€§ã‚’ç¢ºä¿ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã‚‚å¿…è¦ã€‚

**æ±ºå®š**:  
å…¥åŠ›ãƒ»å‡ºåŠ›ã®ä¸¡æ–¹ã«ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã‚’é…ç½®ã€‚Constitution ãƒ™ãƒ¼ã‚¹ã®æ¤œè¨¼ã‚’å¿…é ˆåŒ–ã€‚

**çµæœ**:
- âœ… ä¸æ­£ãªå…¥åŠ›ã‚’ãƒ–ãƒ­ãƒƒã‚¯
- âœ… å‡ºåŠ›ãŒ Constitution ã«æº–æ‹ ã—ã¦ã„ã‚‹ã“ã¨ã‚’ä¿è¨¼
- âœ… PII æ¼æ´©ãƒªã‚¹ã‚¯ã‚’è»½æ¸›
- âš ï¸ ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«å‡¦ç†ã«ã‚ˆã‚‹è‹¥å¹²ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·å¢—åŠ 

---

### ADR-004: ãƒªãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ¡ç”¨  
**æ—¥ä»˜**: 2024-06-01  

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**:  
é•·æ™‚é–“ã®è‡ªå¾‹å®Ÿè¡Œä¸­ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã€è‡ªå‹•çš„ã«å¯¾å‡¦ã™ã‚‹ä»•çµ„ã¿ãŒå¿…è¦ã€‚

**æ±ºå®š**:  
`ReplanningEngine` ã‚’å°å…¥ã—ã€ç›®æ¨™é€²æ—è¿½è·¡ãƒ»ä»£æ›¿æ¡ˆç”Ÿæˆãƒ»é©å¿œçš„ç›®æ¨™ä¿®æ­£ã‚’å®Ÿè£…ã€‚

**çµæœ**:
- âœ… ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«è‡ªå‹•ãƒªã‚«ãƒãƒªãƒ¼
- âœ… äººé–“ã®ä»‹å…¥ã‚’æœ€å°åŒ–
- âœ… è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã§ã‚‚å®Œäº†ç‡ãŒå‘ä¸Š
- âš ï¸ ãƒªãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã®è¤‡é›‘æ€§å¢—åŠ 

---

### ADR-005: ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ¡ç”¨  
**æ—¥ä»˜**: 2025-12-01  

**ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**:  
ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºé¡§å®¢å‘ã‘ã«ã€ãƒ†ãƒŠãƒ³ãƒˆé–“ã®ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ã¨ RBAC ãŒå¿…è¦ã€‚

**æ±ºå®š**:  
`TenantContext` ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã§æ³¨å…¥ã—ã€å…¨ã‚µãƒ¼ãƒ“ã‚¹ã§ãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢ã‚’å®Ÿç¾ã€‚

**çµæœ**:
- âœ… ãƒ†ãƒŠãƒ³ãƒˆé–“ã®ãƒ‡ãƒ¼ã‚¿å®Œå…¨åˆ†é›¢
- âœ… RBAC ã«ã‚ˆã‚‹ç´°ã‹ã„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- âœ… ä½¿ç”¨é‡ã‚¯ã‚©ãƒ¼ã‚¿ã¨ç›£æŸ»ãƒ­ã‚°
- âš ï¸ ãƒ†ãƒŠãƒ³ãƒˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ä¼æ’­ã‚³ã‚¹ãƒˆ

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [API Reference](../API-REFERENCE.md)
- [Interactive Tutorials](./INTERACTIVE-TUTORIALS.md)
- [Plugin Development Guide](./PLUGIN-DEVELOPMENT.md)
- [Quickstart Guide](../QUICKSTART.md)

---

*Â© 2025 MUSUBI SDD - Architecture Deep Dive*
